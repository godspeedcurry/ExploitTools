from get_proxy import get_proxy
import random,json
ans = get_proxy()
print(f'[INFO] found {len(ans)} proxies!')

with open('OmegaOptions.bak','rb') as f:
	s = f.read()
s = json.loads(s)
basketball_teams = ["Hawks", "Bobcats", "Raptors", "Knicks", "Bucks", "Nets", "Pacers", "76ers", "Bulls", "Magic", "Wizards", "Cavaliers", "Celtics", "Pistons", "Heat", "Hornets", "Warriors", "Jazz", "Blazers", "Clippers", "Nuggets", "Timberwolves", "Lakers", "Grizzlies", "Rockets", "Kings", "Mavericks", "Supersonics", "Spurs", "Suns"]
for idx,x in enumerate(ans):
	if idx == len(basketball_teams):
		break
	ip,port = x.split(':')
	port = int(port)
	color = hex(random.randint(0,0xfff))[2:].zfill(3)
	name = basketball_teams[idx]
	data = {
		"bypassList": [
			{
				"conditionType": "BypassCondition", 
				"pattern": "127.0.0.1"
			}, 
			{
				"conditionType": "BypassCondition", 
				"pattern": "[::1]"
			}, 
			{
				"conditionType": "BypassCondition", 
				"pattern": "localhost"
			}
		], 
		"color": f"#{color}", 
		"fallbackProxy": {
			"host": ip, 
			"port": port, 
			"scheme": "socks5"
		}, 
		"name": f"{name}", 
		"profileType": "FixedProfile", 
		"revision": "1756f698ebe"
	}
	
	s[f'+{name}'] = data

with open('output.bak','w') as f:
	f.write(json.dumps(s))
